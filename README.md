# OBS YouTube SuperChat Plugin / Pokonyan OBS Obstruction Plugin

YouTubeã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒãƒ£ãƒƒãƒˆã¨ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¹ãƒ†ãƒƒã‚«ãƒ¼ã«åå¿œã—ã¦ã€OBSã®ç”»é¢ã«é¢ç™½ã„æ¼”å‡ºã‚’åŠ ãˆã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚

## æ©Ÿèƒ½

### ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒãƒ£ãƒƒãƒˆï¼ˆå¦¨å®³åŠ¹æœï¼‰
è¦–è´è€…ãŒã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒãƒ£ãƒƒãƒˆã‚’é€ã‚‹ã¨ã€é‡‘é¡ã«å¿œã˜ã¦ä»¥ä¸‹ã®åŠ¹æœãŒç™ºç”Ÿã—ã¾ã™ï¼š
- **ç”»é¢ç¸®å°**: ãƒ¡ã‚¤ãƒ³ã‚½ãƒ¼ã‚¹ãŒå¾ã€…ã«å°ã•ããªã‚Šã¾ã™ï¼ˆæœ€å¤§80%ã¾ã§ï¼‰
- **éšœå®³ç‰©è¡¨ç¤º**: ãƒ©ãƒ³ãƒ€ãƒ ãªç”»åƒã‚„å‹•ç”»ãŒç”»é¢ä¸Šã«è¡¨ç¤ºã•ã‚Œã¾ã™
- **åŠ¹æœã®å¼·åº¦**: é‡‘é¡ãŒå¤§ãã„ã»ã©åŠ¹æœãŒå¼·ããªã‚Šã¾ã™
  - 100å††: æœ€å°åŠ¹æœ
  - 10,000å††ä»¥ä¸Š: æœ€å¤§åŠ¹æœ

### ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¹ãƒ†ãƒƒã‚«ãƒ¼ï¼ˆå›å¾©åŠ¹æœï¼‰
è¦–è´è€…ãŒã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¹ãƒ†ãƒƒã‚«ãƒ¼ã‚’é€ã‚‹ã¨ã€é‡‘é¡ã«å¿œã˜ã¦ä»¥ä¸‹ã®åŠ¹æœãŒç™ºç”Ÿã—ã¾ã™ï¼š
- **ç”»é¢æ‹¡å¤§**: ç¸®å°ã•ã‚ŒãŸãƒ¡ã‚¤ãƒ³ã‚½ãƒ¼ã‚¹ãŒå…ƒã®ã‚µã‚¤ã‚ºã«æˆ»ã‚Šã¾ã™
- **éšœå®³ç‰©é™¤å»**: è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹éšœå®³ç‰©ãŒãƒ©ãƒ³ãƒ€ãƒ ã«æ¶ˆãˆã¾ã™
- **åŠ¹æœã®å¼·åº¦**: é‡‘é¡ãŒå¤§ãã„ã»ã©å›å¾©åŠ¹æœãŒå¼·ããªã‚Šã¾ã™

## å¿…è¦è¦ä»¶

- OBS Studio 28.0ä»¥ä¸Š
- Qt 6.x
- CMake 3.16ä»¥ä¸Š
- C++17å¯¾å¿œã‚³ãƒ³ãƒ‘ã‚¤ãƒ©
- libcurl
- nlohmann_json
- YouTube Data API v3ã‚­ãƒ¼

## ãƒ“ãƒ«ãƒ‰æ–¹æ³•

### Windowsï¼ˆVisual Studio 2022ï¼‰

**ğŸ“˜ ã‚¬ã‚¤ãƒ‰:**
- ğŸš€ **åˆã‚ã¦ã®æ–¹**: [Windowså‘ã‘ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰](QUICKSTART_WINDOWS.md)
- ğŸ’» **Visual Studio GUIã§ãƒ“ãƒ«ãƒ‰**: [Visual Studio GUIãƒ“ãƒ«ãƒ‰ã‚¬ã‚¤ãƒ‰](docs/VISUAL_STUDIO_GUI_BUILD.md) â­ãŠã™ã™ã‚
- ğŸ“– **ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³è©³ç´°**: [Visual Studioã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](docs/VISUAL_STUDIO_SETUP.md)
- ğŸ”§ **vcpkgã§å•é¡ŒãŒç™ºç”Ÿ**: [vcpkgãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](docs/VCPKG_TROUBLESHOOTING.md)

**æ–¹æ³•1: Visual Studio GUIï¼ˆæœ€ã‚‚ç°¡å˜ï¼ï¼‰**

1. Visual Studioã§ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
2. `CMakeSettings.json` ã®ãƒ‘ã‚¹ã‚’ç·¨é›†ï¼ˆOBSã€Qtã€vcpkgï¼‰
3. **Ctrl+Shift+B** ã§ãƒ“ãƒ«ãƒ‰

è©³ç´°: [Visual Studio GUIãƒ“ãƒ«ãƒ‰ã‚¬ã‚¤ãƒ‰](docs/VISUAL_STUDIO_GUI_BUILD.md)

**æ–¹æ³•2: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³**

```bash
# vcpkgã§ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œ
mkdir build
cd build
cmake -G "Visual Studio 17 2022" -A x64 ^
      -DCMAKE_TOOLCHAIN_FILE=C:\vcpkg\scripts\buildsystems\vcpkg.cmake ^
      -DCMAKE_PREFIX_PATH=C:\obs-studio ^
      ..
cmake --build . --config Release
```

**æ–¹æ³•3: build.batã‚¹ã‚¯ãƒªãƒ—ãƒˆ**

```batch
.\build.bat
```

### Linux / macOS

```bash
mkdir build
cd build
cmake -DCMAKE_PREFIX_PATH=/path/to/obs-studio/build ..
make
sudo make install
```

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. YouTube Data API v3ã‚­ãƒ¼ã®å–å¾—

1. [Google Cloud Console](https://console.cloud.google.com/)ã«ã‚¢ã‚¯ã‚»ã‚¹
2. æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
3. YouTube Data API v3ã‚’æœ‰åŠ¹åŒ–
4. APIã‚­ãƒ¼ã‚’ä½œæˆ
5. APIã‚­ãƒ¼ã«é©åˆ‡ãªåˆ¶é™ã‚’è¨­å®šï¼ˆYouTube Data API v3ã®ã¿ï¼‰

### 2. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¨­å®š

1. OBS Studioã‚’èµ·å‹•
2. ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ **Tools > YouTube SuperChat Plugin Settings** ã‚’é–‹ã
3. ä»¥ä¸‹ã®æƒ…å ±ã‚’å…¥åŠ›ï¼š
   - **API Key**: å–å¾—ã—ãŸYouTube Data API v3ã‚­ãƒ¼
   - **Video ID**: é…ä¿¡ä¸­ã®YouTubeå‹•ç”»IDï¼ˆURLã®`v=`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å€¤ï¼‰
   - **Main Source**: ç¸®å°/æ‹¡å¤§å¯¾è±¡ã®ã‚½ãƒ¼ã‚¹åï¼ˆä¾‹: "Game Capture"ï¼‰
4. **Enable Obstructions**: ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒãƒ£ãƒƒãƒˆã®å¦¨å®³åŠ¹æœã‚’æœ‰åŠ¹åŒ–
5. **Enable Recovery**: ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¹ãƒ†ãƒƒã‚«ãƒ¼ã®å›å¾©åŠ¹æœã‚’æœ‰åŠ¹åŒ–
6. **Obstruction Intensity**: å¦¨å®³åŠ¹æœã®å¼·ã•ã‚’èª¿æ•´ï¼ˆ0.1ã€œ3.0ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1.0ï¼‰
7. **Recovery Intensity**: å›å¾©åŠ¹æœã®å¼·ã•ã‚’èª¿æ•´ï¼ˆ0.1ã€œ3.0ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1.0ï¼‰
8. **Save**ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¨­å®šã‚’ä¿å­˜
9. **Start Monitoring**ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç›£è¦–ã‚’é–‹å§‹

### 3. éšœå®³ç‰©ã‚¢ã‚»ãƒƒãƒˆã®è¿½åŠ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯èµ¤ã„å››è§’ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ãŒã€ã‚«ã‚¹ã‚¿ãƒ ç”»åƒã‚„å‹•ç”»ã‚’ä½¿ç”¨ã§ãã¾ã™ï¼š

1. `data/obstruction_assets/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç”»åƒã‚„å‹•ç”»ã‚’é…ç½®
2. å¯¾å¿œãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼š
   - ç”»åƒ: PNG, JPG, JPEG, GIF
   - å‹•ç”»: MP4, WebM

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯è‡ªå‹•çš„ã«ãƒ©ãƒ³ãƒ€ãƒ ãªã‚¢ã‚»ãƒƒãƒˆã‚’é¸ã‚“ã§è¡¨ç¤ºã—ã¾ã™ã€‚

## ä½¿ç”¨æ–¹æ³•

1. YouTube Liveã§é…ä¿¡ã‚’é–‹å§‹
2. OBSã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¨­å®šã‚’é–‹ãã€Video IDã«é…ä¿¡ã®IDã‚’å…¥åŠ›
3. **Start Monitoring**ã‚’ã‚¯ãƒªãƒƒã‚¯
4. è¦–è´è€…ã‹ã‚‰ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒãƒ£ãƒƒãƒˆã‚„ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¹ãƒ†ãƒƒã‚«ãƒ¼ã‚’å—ã‘å–ã‚‹ã¨è‡ªå‹•çš„ã«æ¼”å‡ºãŒç™ºç”Ÿ

### åŠ¹æœã®ä¾‹

- **500å††ã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒãƒ£ãƒƒãƒˆ**: ç”»é¢ãŒç´„7%ç¸®å°ã€éšœå®³ç‰©1-2å€‹è¿½åŠ 
- **5,000å††ã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒãƒ£ãƒƒãƒˆ**: ç”»é¢ãŒç´„17%ç¸®å°ã€éšœå®³ç‰©2-3å€‹è¿½åŠ 
- **10,000å††ã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒãƒ£ãƒƒãƒˆ**: ç”»é¢ãŒæœ€å¤§30%ç¸®å°ã€éšœå®³ç‰©4å€‹è¿½åŠ 
- **500å††ã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¹ãƒ†ãƒƒã‚«ãƒ¼**: ç”»é¢ãŒç´„15%æ‹¡å¤§ã€éšœå®³ç‰©1-2å€‹é™¤å»
- **5,000å††ã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¹ãƒ†ãƒƒã‚«ãƒ¼**: ç”»é¢ãŒç´„30%æ‹¡å¤§ã€éšœå®³ç‰©2-3å€‹é™¤å»

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒèª­ã¿è¾¼ã¾ã‚Œãªã„

- OBS Studioã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªï¼ˆ28.0ä»¥ä¸ŠãŒå¿…è¦ï¼‰
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒæ­£ã—ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- OBSã®ãƒ­ã‚°ã‚’ç¢ºèªï¼ˆHelp > Log Files > Current Logï¼‰

### YouTube Chat APIãŒå‹•ä½œã—ãªã„

- APIã‚­ãƒ¼ãŒæ­£ã—ã„ã‹ç¢ºèª
- Video IDãŒæ­£ã—ã„ã‹ç¢ºèªï¼ˆé…ä¿¡ä¸­ã®å‹•ç”»ã®ã¿å¯¾å¿œï¼‰
- Google Cloud Consoleã§YouTube Data API v3ãŒæœ‰åŠ¹ã‹ç¢ºèª
- APIã®ä½¿ç”¨é‡åˆ¶é™ã«é”ã—ã¦ã„ãªã„ã‹ç¢ºèª

### åŠ¹æœãŒç™ºç”Ÿã—ãªã„

- **Start Monitoring**ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- Main Sourceã®åå‰ãŒæ­£ã—ã„ã‹ç¢ºèª
- Enable Obstructionsã¾ãŸã¯Enable RecoveryãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- OBSãƒ­ã‚°ã§ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

è¨­å®šã¯OBSã®ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã•ã‚Œã¾ã™ï¼š
- Linux: `~/.config/obs-studio/global.ini`
- macOS: `~/Library/Application Support/obs-studio/global.ini`
- Windows: `%APPDATA%\obs-studio\global.ini`

ã‚»ã‚¯ã‚·ãƒ§ãƒ³å: `[YouTubeSuperChatPlugin]`

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## é–‹ç™ºè€…å‘ã‘æƒ…å ±

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
Pokonyan-OBSObstruction-Plugin/
â”œâ”€â”€ CMakeLists.txt              # ãƒ“ãƒ«ãƒ‰è¨­å®š
â”œâ”€â”€ README.md                   # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ data/
â”‚   â””â”€â”€ obstruction_assets/     # éšœå®³ç‰©ç”¨ã‚¢ã‚»ãƒƒãƒˆ
â””â”€â”€ src/
    â”œâ”€â”€ plugin-main.cpp         # ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
    â”œâ”€â”€ plugin-main.hpp
    â”œâ”€â”€ youtube-chat-client.cpp # YouTube Chat APIçµ±åˆ
    â”œâ”€â”€ youtube-chat-client.hpp
    â”œâ”€â”€ obstruction-manager.cpp # æ¼”å‡ºåŠ¹æœãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
    â”œâ”€â”€ obstruction-manager.hpp
    â”œâ”€â”€ settings-dialog.cpp     # è¨­å®šUI
    â””â”€â”€ settings-dialog.hpp
```

### APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

#### ObstructionManager

ä¸»ãªæ©Ÿèƒ½ï¼š
- `ApplyObstruction(double amount)`: é‡‘é¡ã«å¿œã˜ãŸå¦¨å®³åŠ¹æœã‚’é©ç”¨
- `ApplyRecovery(double amount)`: é‡‘é¡ã«å¿œã˜ãŸå›å¾©åŠ¹æœã‚’é©ç”¨
- `ShrinkMainSource(double percentage)`: ãƒ¡ã‚¤ãƒ³ã‚½ãƒ¼ã‚¹ã‚’ç¸®å°
- `ExpandMainSource(double percentage)`: ãƒ¡ã‚¤ãƒ³ã‚½ãƒ¼ã‚¹ã‚’æ‹¡å¤§
- `ClearAllObstructions()`: ã™ã¹ã¦ã®éšœå®³ç‰©ã‚’å‰Šé™¤

#### YouTubeChatClient

ä¸»ãªæ©Ÿèƒ½ï¼š
- `SetApiKey(const std::string& apiKey)`: APIã‚­ãƒ¼ã‚’è¨­å®š
- `SetVideoId(const std::string& videoId)`: å‹•ç”»IDã‚’è¨­å®š
- `Start()`: ãƒãƒ£ãƒƒãƒˆç›£è¦–ã‚’é–‹å§‹
- `Stop()`: ãƒãƒ£ãƒƒãƒˆç›£è¦–ã‚’åœæ­¢

## è²¢çŒ®

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ï¼å¤§ããªå¤‰æ›´ã®å ´åˆã¯ã€ã¾ãšIssueã‚’é–‹ã„ã¦å¤‰æ›´å†…å®¹ã‚’è­°è«–ã—ã¦ãã ã•ã„ã€‚

## ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€GitHubã®Issueã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§å ±å‘Šã—ã¦ãã ã•ã„ã€‚
